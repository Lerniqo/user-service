generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Unified user table for all user types
model User {
  id                    String    @id @default(cuid())
  email                 String    @unique
  password             String
  role                 UserRole
  fullName             String    @map("full_name")
  
  // Student-specific fields
  gradeLevel           Int?      @map("grade_level")
  learningGoals        String?   @map("learning_goals") @db.Text
  
  // Teacher-specific fields
  qualifications       String?   @db.Text
  experienceSummary    String?   @map("experience_summary") @db.Text
  
  // Common fields
  isActive             Boolean   @default(true) @map("is_active")
  isVerified           Boolean   @default(false) @map("is_verified")
  profileImage         String?   @map("profile_image")
  verificationCode     String?   @unique @map("verification_code")
  passwordResetCode    String?   @unique @map("password_reset_code")
  passwordResetExpires DateTime? @map("password_reset_expires")
  createdAt            DateTime  @default(now()) @map("created_at")
  updatedAt            DateTime  @updatedAt @map("updated_at")

  @@map("users")
}

// Enum for user roles
enum UserRole {
  Student
  Teacher
  Admin
}
